<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì˜¨ë¼ì¸ í€´ì¦ˆ</title>
  <style>
    :root { --bg:#fafafa; --card:#fff; --ink:#111; --muted:#6b7280; --line:#e5e7eb; --ok:#065f46; --okbg:#ecfdf5; --bad:#991b1b; --badbg:#fef2f2; }
    * { box-sizing: border-box; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans KR, Apple SD Gothic Neo, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif; background:var(--bg); color:var(--ink); }
    header { position:sticky; top:0; z-index:10; background:rgba(255,255,255,.9); backdrop-filter:saturate(180%) blur(10px); border-bottom:1px solid var(--line); }
    .wrap { max-width: 820px; margin: 0 auto; padding: 16px; }
    h1 { font-size: 22px; margin: 8px 0; }
    .row { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    button, .btn { appearance:none; border:1px solid var(--line); background:#fff; padding:8px 12px; border-radius:12px; cursor:pointer; }
    button.primary { background:#111; color:#fff; }
    button:hover, .btn:hover { background:#f5f5f5; }
    main { padding:16px; }
    .card { background:var(--card); border:1px solid var(--line); border-radius:16px; box-shadow: 0 1px 3px rgba(0,0,0,.04); padding:16px; }
    .muted { color: var(--muted); font-size: 14px; }
    .q { margin: 0 0 8px; font-weight: 600; }
    textarea, select, input[type="text"] { width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:12px; background:#fff; }
    ol { list-style: none; padding:0; margin:0; }
    li + li { margin-top: 12px; }
    .badge { font-size:12px; padding:4px 8px; border-radius:8px; border:1px solid transparent; }
    .badge.ok { color:var(--ok); background:var(--okbg); border-color:#a7f3d0; }
    .badge.bad { color:var(--bad); background:var(--badbg); border-color:#fecaca; }
    details { margin-top:8px; }
    summary { cursor:pointer; }
    code { background:#f3f4f6; padding:2px 6px; border-radius:6px; }
    footer { color:var(--muted); font-size:12px; margin: 32px 0 16px; }
    .grid { display:grid; grid-template-columns: 1fr; gap:12px; }
    @media (min-width: 640px){ .grid { grid-template-columns: 1fr 1fr; } }
  </style>
</head>
<body>
  <header>
    <div class="wrap row" style="justify-content:space-between;">
      <h1>ğŸ“ ì˜¨ë¼ì¸ í€´ì¦ˆ</h1>
      <div class="row">
        <button id="btnTemplate" class="btn">JSON í…œí”Œë¦¿</button>
        <label class="btn" style="cursor:pointer;">
          í€´ì¦ˆ ì—…ë¡œë“œ
          <input id="fileInput" type="file" accept="application/json" style="display:none" />
        </label>
        <button id="btnDefault" class="btn">ê¸°ë³¸ ì„¸íŠ¸</button>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section id="stats" class="card" aria-live="polite">
      <div class="grid">
        <div>
          <div class="muted">ë¬¸í•­ ìˆ˜</div>
          <div id="count" style="font-weight:600;">-</div>
        </div>
        <div>
          <div class="muted">ì±„ì  ì™„ë£Œ</div>
          <div id="graded" style="font-weight:600;">-</div>
        </div>
      </div>
      <div class="row" style="margin-top:10px;">
        <button id="btnGradeAll" class="primary">ì „ì²´ ì±„ì </button>
        <button id="btnReset">ë¦¬ì…‹</button>
      </div>
      <div id="scoreline" class="muted" style="margin-top:8px; display:none;"></div>
    </section>

    <ol id="quizList" style="margin-top:12px;"></ol>

    <footer>
      â€¢ JSON ìŠ¤í‚¤ë§ˆ: ê° í•­ëª©ì€ <code>id</code>, <code>type</code>(ox|short|text), <code>question</code>, ì •ë‹µ í•„ë“œ(<code>answer</code> | <code>acceptable</code> | <code>keywords_correct</code> | <code>acceptable_all</code>), <code>explanation</code>ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.<br>
      â€¢ ì •í™• ì±„ì ì´ ì¤‘ìš”í•˜ë©´ OX/ë‹¨ë‹µ ìœ„ì£¼ë¡œ êµ¬ì„±í•˜ê±°ë‚˜ ì„ íƒì§€ë¥¼ ëª…ì‹œí•˜ì„¸ìš”. ì„œìˆ í˜•ì€ í‚¤ì›Œë“œ ê¸°ë°˜ í‰ê°€ì…ë‹ˆë‹¤.
    </footer>
  </main>

  <script>
  // ---------- ê¸°ë³¸ ë°ì´í„° ----------
  const DEFAULT_QUIZ = [
    { id:1, type:"ox", question:"__init__ ë©”ì„œë“œëŠ” ê°ì²´ ìƒì„± ì‹œ ë°˜ë“œì‹œ í•œ ë²ˆ í˜¸ì¶œëœë‹¤. (O/X)", answer:"O", explanation:"ì¼ë°˜ì ì¸ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ê²½ë¡œì—ì„œëŠ” í•œ ë²ˆ í˜¸ì¶œë©ë‹ˆë‹¤. ë‹¤ë§Œ __new__ë¡œ ìš°íšŒí•˜ê±°ë‚˜ í”¼í´/ë©”íƒ€í”„ë¡œê·¸ë˜ë° ë“± íŠ¹ìˆ˜í•œ ê²½ìš°ì—” ì˜ˆì™¸ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
    { id:2, type:"ox", question:"import pandas as pd ì—ì„œ pdëŠ” íŒ¨í‚¤ì§€ ì‹¤ì œ ì´ë¦„ì´ë‹¤. (O/X)", answer:"X", explanation:"pdëŠ” ë³„ì¹­(alias)ì…ë‹ˆë‹¤. ì‹¤ì œ íŒ¨í‚¤ì§€ ì´ë¦„ì€ pandasì´ë©° as í‚¤ì›Œë“œë¡œ ë³„ì¹­ì„ ì •í•´ ì‚¬ìš©í•©ë‹ˆë‹¤." },
    { id:3, type:"short", question:"pandasì—ì„œ DataFrameì˜ í–‰ê³¼ ì—´ì˜ í¬ê¸°(í–‰ ìˆ˜, ì—´ ìˆ˜)ë¥¼ í•œ ë²ˆì— í™•ì¸í•˜ëŠ” ì†ì„±ì€?", acceptable:["shape","df.shape"], canonical:"shape", explanation:"DataFrame.shape ì†ì„±ì€ (í–‰ ìˆ˜, ì—´ ìˆ˜)ë¥¼ íŠœí”Œ í˜•íƒœë¡œ ë°˜í™˜í•©ë‹ˆë‹¤." },
    { id:4, type:"text", question:"from math import * ì‚¬ìš© ì‹œ ì¥ì ê³¼ ë‹¨ì ì€?", keywords_correct:[["ê°„í¸","íƒ€ì´í•‘","í¸ì˜","ì§§ê²Œ"],["ë„¤ì„ìŠ¤í˜ì´ìŠ¤","ì˜¤ì—¼","ì¶©ëŒ","ê°€ë…ì„±","ë®ì–´ì“°ê¸°","ëª…ì‹œì  ì•„ë‹˜"]], explanation:"ì¥ì : ì§§ê³  í¸ë¦¬í•©ë‹ˆë‹¤. / ë‹¨ì : ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì˜¤ì—¼, ê°€ë…ì„± ì €í•˜, ì´ë¦„ ì¶©ëŒÂ·ì˜ˆìƒì¹˜ ëª»í•œ ë®ì–´ì“°ê¸°ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
    { id:5, type:"short", question:"os ëª¨ë“ˆì—ì„œ í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ëŠ”?", acceptable:["os.getcwd","getcwd","os.getcwd()"], canonical:"os.getcwd()", explanation:"í˜„ì¬ ì‘ì—… ë””ë ‰í† ë¦¬(Current Working Directory)ë¥¼ ë¬¸ìì—´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤." },
    { id:6, type:"short", question:"requests ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì–´ë–¤ ìš©ë„ë¡œ ì‚¬ìš©ë˜ëŠ”ê°€?", acceptable:["http","ìš”ì²­","rest","api","ì›¹ ìš”ì²­","http ìš”ì²­"], canonical:"HTTP ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬ (REST API í˜¸ì¶œ ë“±)", explanation:"HTTP ìš”ì²­ì„ ë³´ë‚´ê³  ì‘ë‹µì„ ë‹¤ë£¨ëŠ” ê³ ìˆ˜ì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤." },
    { id:7, type:"short", question:"ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°(OOP)ì˜ 4ëŒ€ íŠ¹ì§•ì„ ëª¨ë‘ ë§í•˜ì‹œì˜¤.", acceptable_all:["ì¶”ìƒí™”","ìº¡ìŠí™”","ìƒì†","ë‹¤í˜•ì„±"], explanation:"ì¶”ìƒí™”Â·ìº¡ìŠí™”Â·ìƒì†Â·ë‹¤í˜•ì„±ì´ í•µì‹¬ ë„¤ ê°€ì§€ ì¶•ì…ë‹ˆë‹¤." },
    { id:8, type:"text", question:"í´ë˜ìŠ¤ ë©”ì„œë“œì™€ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì˜ ì°¨ì´ëŠ”?", keywords_correct:[["classmethod","@classmethod","cls","í´ë˜ìŠ¤ ìˆ˜ì¤€","í´ë˜ìŠ¤ ìì²´"],["ì¸ìŠ¤í„´ìŠ¤","self","ê°ì²´ ìˆ˜ì¤€","ê°œë³„ ê°ì²´"]], explanation:"@classmethodëŠ” ì²« ë§¤ê°œë³€ìˆ˜ë¡œ clsë¥¼ ë°›ì•„ í´ë˜ìŠ¤ ìˆ˜ì¤€ ë™ì‘ì„ í•˜ê³ , ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œëŠ” selfë¥¼ ë°›ì•„ ê°œë³„ ê°ì²´ ìƒíƒœë¥¼ ë‹¤ë£¹ë‹ˆë‹¤." },
    { id:9, type:"ox", question:"self í‚¤ì›Œë“œëŠ” ì˜ˆì•½ì–´ì´ë‹¤. (O/X)", answer:"X", explanation:"ì˜ˆì•½ì–´ê°€ ì•„ë‹Œ ê´€ë¡€ì ì¸ ì´ë¦„ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì„ ì¨ë„ ë˜ì§€ë§Œ ê¶Œì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤." },
    { id:10, type:"short", question:"ë°ì´í„° ì „ì²˜ë¦¬ ê³¼ì •ì—ì„œ ê²°ì¸¡ì¹˜ë¥¼ ì±„ìš°ëŠ” pandas ë©”ì„œë“œëŠ”?", acceptable:["fillna","pd.fillna","DataFrame.fillna"], canonical:"fillna", explanation:"Series/DataFrameì˜ ê²°ì¸¡ê°’ì„ ì§€ì • ê°’/ë°©ë²•ìœ¼ë¡œ ëŒ€ì²´í•©ë‹ˆë‹¤." },
    { id:11, type:"short", question:"numpy ë°°ì—´ì˜ ì°¨ì›ì„ í™•ì¸í•˜ëŠ” ì†ì„±ì€?", acceptable:["ndim"], canonical:"ndim", explanation:"ë°°ì—´ì˜ ì°¨ì› ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì •ìˆ˜ ì†ì„±ì…ë‹ˆë‹¤." },
    { id:12, type:"short", question:"scikit-learnì—ì„œ train_test_split í•¨ìˆ˜ì˜ ì—­í• ì€?", acceptable:["ë¶„í• ","í›ˆë ¨","í…ŒìŠ¤íŠ¸","split","train","test"], canonical:"ë°ì´í„°ì…‹ì„ í•™ìŠµ/í‰ê°€ìš©ìœ¼ë¡œ ë¶„í• ", explanation:"íŠ¹ì§•/ë ˆì´ë¸”ì„ ë¬´ì‘ìœ„ë¡œ ì„ì–´ í•™ìŠµÂ·ê²€ì¦ ì„¸íŠ¸ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤." },
    { id:13, type:"short", question:"í‘œì¤€í¸ì°¨(std)ê°€ í¬ë©´ ë°ì´í„° ë¶„ì‚°ì€ ì–´ë–»ê²Œ ë˜ëŠ”ê°€?", acceptable:["í¬ë‹¤","ì»¤ì§„ë‹¤","ì¦ê°€","í©ì–´ì§„","ë³€ë™ì„±"], canonical:"ë¶„ì‚°/ë³€ë™ì„±ì´ í¬ë‹¤(ë°ì´í„°ê°€ ë” í©ì–´ì§)", explanation:"í‘œì¤€í¸ì°¨ëŠ” ë¶„ì‚°ì˜ ì œê³±ê·¼ìœ¼ë¡œ, ê°’ì´ í´ìˆ˜ë¡ ë°ì´í„°ê°€ í‰ê· ìœ¼ë¡œë¶€í„° ë” í¼ì ¸ ìˆìŠµë‹ˆë‹¤." },
    { id:14, type:"short", question:"matplotlibì—ì„œ ê·¸ë˜í”„ ì œëª©ì„ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜ëŠ”?", acceptable:["plt.title","title","plt.title()"], canonical:"plt.title()", explanation:"Matplotlib pyplotì˜ ì œëª© ì„¤ì • í•¨ìˆ˜ì…ë‹ˆë‹¤." },
    { id:15, type:"short", question:"ë°•ìŠ¤í”Œë¡¯ì—ì„œ ì¤‘ì•™ì˜ ì„ ì´ ì˜ë¯¸í•˜ëŠ” ê°’ì€?", acceptable:["ì¤‘ì•™ê°’","median"], canonical:"ì¤‘ì•™ê°’(median)", explanation:"ìƒì(box) ë‚´ë¶€ì˜ ì¤‘ì•™ ì„ ì€ ì¤‘ì•™ê°’ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤." }
  ];

  localStorage.clear();

  // ---------- ìƒíƒœ ----------
  let quiz = JSON.parse(localStorage.getItem('quiz-data') || 'null') || DEFAULT_QUIZ;
  let answers = JSON.parse(localStorage.getItem('quiz-answers') || '{}');
  let results = {}; // {id: {correct, feedback}}
  let gradedAll = false;

  // ---------- ìœ í‹¸ ----------
  const $ = (sel) => document.querySelector(sel);
  const $$ = (sel) => Array.from(document.querySelectorAll(sel));
  const norm = (s) => (s ?? '').toString().trim().toLowerCase();

  function setStat() {
    $('#count').textContent = quiz.length;
    const done = Object.values(results).filter(Boolean).length;
    $('#graded').textContent = `${done} / ${quiz.length}`;
    if (gradedAll) {
      const correct = Object.values(results).filter(r => r && r.correct).length;
      const pct = quiz.length ? Math.round((correct / quiz.length) * 100) : 0;
      const line = `ì ìˆ˜: ${correct} / ${quiz.length} (${pct}%)`;
      const el = $('#scoreline');
      el.textContent = line;
      el.style.display = 'block';
    } else {
      $('#scoreline').style.display = 'none';
    }
  }

  function persist() {
    localStorage.setItem('quiz-data', JSON.stringify(quiz));
    localStorage.setItem('quiz-answers', JSON.stringify(answers));
  }

  // ---------- ì±„ì  ë¡œì§ ----------
  function checkOX(item, user) {
    const u = norm(user);
       const a = norm(item.answer);
    const correct = u === a || (u === 'o' && a.startsWith('o')) || (u === 'x' && a.startsWith('x'));
    return { correct, feedback: correct ? 'ì •ë‹µ' : `ì˜¤ë‹µ (ì •ë‹µ: ${item.answer})` };
  }

  function checkShort(item, user) {
    const u = norm(user);
    if (!u) {
      return { correct: false, feedback: 'ë¯¸ì‘ë‹µ: ë‹µì„ ì…ë ¥í•´ ì£¼ì„¸ìš”' };
    }
    const acc = (item.acceptable || []).map(norm);

    // ì™„ì „ì¼ì¹˜ ë˜ëŠ” ê³µë°±ë¬´ì‹œ ì¼ì¹˜ ë˜ëŠ” "ì‚¬ìš©ì ì…ë ¥ì— ì •ë‹µ í‚¤ì›Œë“œê°€ í¬í•¨"ë§Œ í—ˆìš©
    const correct = acc.some(a =>
      u === a ||
      u.replace(/\s+/g, '') === a.replace(/\s+/g, '') ||
      u.includes(a)
    );

    const ans = item.canonical || acc[0] || '';
    return { correct, feedback: correct ? 'ì •ë‹µ' : `ì˜¤ë‹µ (í‚¤ì›Œë“œ ì˜ˆ: ${ans})` };
  }

  function checkText(item, user) {
    const groups = item.keywords_correct || [];
    const u = norm(user);
    const correct = groups.every(group => group.some(kw => u.includes(norm(kw))));
    let need = groups.map(group => (group.find(kw => u.includes(norm(kw))) ? null : `â€¢ ${group.join(', ')}`)).filter(Boolean).join('\n');
    const feedback = correct ? 'í•µì‹¬ í¬ì¸íŠ¸ ì¶©ì¡±' : `ë¶€ì¡±í•œ í‚¤ì›Œë“œ:\n${need}`;
    return { correct, feedback };
  }

  function checkAllRequired(item, user) { // Q7 ì „ìš©
    const u = norm(user);
    const required = (item.acceptable_all || []).map(norm);
    const missing = required.filter(k => !u.includes(k));
    const correct = missing.length === 0;
    const feedback = correct ? 'ì •ë‹µ' : `ëˆ„ë½: ${missing.join(', ')}`;
    return { correct, feedback };
  }

  function checkOne(item, user) {
    if (item.type === 'ox') return checkOX(item, user);
    if (item.type === 'short') return (item.acceptable_all ? checkAllRequired(item, user) : checkShort(item, user));
    return checkText(item, user);
  }

  // ---------- ë Œë” ----------
  function render() {
    const list = $('#quizList');
    list.innerHTML = '';
    quiz.forEach(item => {
      const li = document.createElement('li');
      li.className = 'card';

      const q = document.createElement('p');
      q.className = 'q';
      q.textContent = `${item.id}. ${item.question}`;
      li.appendChild(q);

      let inputEl;
      if (item.type === 'ox') {
        inputEl = document.createElement('select');
        inputEl.innerHTML = '<option value="">ì„ íƒ</option><option value="O">O</option><option value="X">X</option>';
      } else {
        inputEl = document.createElement('textarea');
        inputEl.placeholder = item.type === 'short' ? 'ì •ë‹µ(ë‹¨ë‹µ) ì…ë ¥' : 'í•µì‹¬ í‚¤ì›Œë“œë¥¼ í¬í•¨í•´ ì„œìˆ í•˜ì„¸ìš”';
        inputEl.rows = 4;
      }
      inputEl.value = answers[item.id] ?? '';
      inputEl.addEventListener('input', (e) => {
        answers[item.id] = e.target.value;
        results[item.id] = undefined; // ì…ë ¥ ì‹œ ì´ì „ ì±„ì  ë¦¬ì…‹
        gradedAll = false;
        persist();
        setStat();
        renderRowFooter(li, item);
      });
      li.appendChild(inputEl);

      const actionRow = document.createElement('div');
      actionRow.className = 'row';
      actionRow.style.marginTop = '8px';

      const btn = document.createElement('button');
      btn.textContent = 'ì±„ì ';
      btn.addEventListener('click', () => {
        const r = checkOne(item, answers[item.id]);
        results[item.id] = r;
        renderRowFooter(li, item);
        setStat();
      });
      actionRow.appendChild(btn);

      const badge = document.createElement('span');
      badge.className = 'badge';
      badge.style.display = 'none';
      badge.id = `badge-${item.id}`;
      actionRow.appendChild(badge);

      li.appendChild(actionRow);

      const fbWrap = document.createElement('div');
      fbWrap.id = `fb-${item.id}`;
      fbWrap.style.marginTop = '8px';
      li.appendChild(fbWrap);

      list.appendChild(li);

      renderRowFooter(li, item);
    });

    setStat();
  }

  function renderRowFooter(li, item) {
    const r = results[item.id];
    const badge = li.querySelector(`#badge-${item.id}`);
    const fb = li.querySelector(`#fb-${item.id}`);

    if (r) {
      badge.style.display = 'inline-block';
      badge.textContent = r.correct ? 'ì •ë‹µ' : 'ì˜¤ë‹µ';
      badge.className = `badge ${r.correct ? 'ok' : 'bad'}`;

      fb.innerHTML = '';
      const p = document.createElement('p');
      p.className = 'muted';
      p.style.whiteSpace = 'pre-wrap';
      p.innerHTML = `<strong>í”¼ë“œë°±:</strong> ${r.feedback}`;
      fb.appendChild(p);

      if (item.explanation) {
        const det = document.createElement('details');
        const sum = document.createElement('summary');
        sum.textContent = 'í•´ì„¤ ë³´ê¸°';
        det.appendChild(sum);
        const box = document.createElement('div');
        box.className = 'card';
        box.style.marginTop = '6px';
        box.textContent = item.explanation;
        det.appendChild(box);
        fb.appendChild(det);
      }
    } else {
      badge.style.display = 'none';
      fb.innerHTML = '';
    }
  }

  // ---------- ì´ë²¤íŠ¸ ë°”ì¸ë”© ----------
  $('#btnGradeAll').addEventListener('click', () => {
    results = {};
    quiz.forEach(q => { results[q.id] = checkOne(q, answers[q.id]); });
    gradedAll = true;
    render();
  });

  $('#btnReset').addEventListener('click', () => {
    answers = {};
    results = {};
    gradedAll = false;
    persist();
    render();
  });

  $('#btnDefault').addEventListener('click', () => {
    quiz = JSON.parse(JSON.stringify(DEFAULT_QUIZ));
    answers = {};
    results = {};
    gradedAll = false;
    persist();
    render();
  });

  $('#fileInput').addEventListener('change', async (e) => {
    const file = e.target.files && e.target.files[0];
    if (!file) return;
    try {
      const text = await file.text();
      const data = JSON.parse(text);
      if (!Array.isArray(data)) throw new Error('JSONì€ ë°°ì—´ì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
      data.forEach((d, i) => {
        if (d == null || typeof d !== 'object') throw new Error(`${i+1}ë²ˆì§¸ í•­ëª©ì´ ê°ì²´ê°€ ì•„ë‹™ë‹ˆë‹¤.`);
        if (d.id == null || !d.question) throw new Error(`${i+1}ë²ˆì§¸ í•­ëª©: id/question ëˆ„ë½`);
        if (!['ox','short','text'].includes(d.type)) throw new Error(`${i+1}ë²ˆì§¸ í•­ëª©: ì§€ì›í•˜ì§€ ì•ŠëŠ” type`);
      });
      quiz = data;
      answers = {};
      results = {};
      gradedAll = false;
      persist();
      render();
    } catch (err) {
      alert('ì—…ë¡œë“œ ì‹¤íŒ¨: ' + err.message);
    } finally {
      e.target.value = '';
    }
  });

  $('#btnTemplate').addEventListener('click', () => {
    const template = [
      { id:1, type:'ox', question:'ì˜ˆ) íŒŒì´ì¬ì€ ì¸í„°í”„ë¦¬í„° ì–¸ì–´ë‹¤. (O/X)', answer:'O', explanation:'ê°„ë‹¨ ì„¤ëª…' },
      { id:2, type:'short', question:'ì˜ˆ) os ëª¨ë“ˆë¡œ í˜„ì¬ ë””ë ‰í† ë¦¬ êµ¬í•˜ëŠ” í•¨ìˆ˜?', acceptable:['os.getcwd','getcwd','os.getcwd()'], canonical:'os.getcwd()', explanation:'ì •ë‹µ/ì„¤ëª…' },
      { id:3, type:'text', question:'ì˜ˆ) from X import * ì˜ ì¥ë‹¨ì ?', keywords_correct:[["ì¥ì ","ê°„í¸"],["ë‹¨ì ","ë„¤ì„ìŠ¤í˜ì´ìŠ¤","ì˜¤ì—¼","ì¶©ëŒ"]], explanation:'í‚¤ì›Œë“œ ê¸°ì¤€ ì±„ì ' }
    ];
    const blob = new Blob([JSON.stringify(template, null, 2)], { type: 'application/json;charset=utf-8' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'quiz_template.json';
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
  });

  // ì´ˆê¸° ë Œë”
  render();
  </script>
</body>
</html>
